/**
 * –†–µ–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç GET /api/ocr –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á
 * –ó–∞–¥–∞—á–∞ 6.2: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
 */

require('dotenv').config();

async function testOcrStatusReal() {
  console.log('üîß –†–µ–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç GET /api/ocr (–∑–∞–¥–∞—á–∞ 6.2)...');
  
  try {
    // –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ—à–∏–±–∫–∞)
    console.log('\nüìã –¢–µ—Å—Ç 1: –ó–∞–ø—Ä–æ—Å –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤...');
    console.log('üîç GET /api/ocr (–±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)');
    console.log('  –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 400 - MISSING_PARAMETERS');
    
    // –¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º jobId
    console.log('\nüìã –¢–µ—Å—Ç 2: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π jobId...');
    console.log('üîç GET /api/ocr?jobId=nonexistent-job-123');
    console.log('  –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 404 - JOB_NOT_FOUND');
    
    // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º documentId
    console.log('\nüìã –¢–µ—Å—Ç 3: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π documentId...');
    console.log('üîç GET /api/ocr?documentId=nonexistent-doc-123');
    console.log('  –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: 404 - DOCUMENT_NOT_FOUND');
    
    console.log('\n‚úÖ –õ–æ–≥–∏–∫–∞ API endpoint —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–æ–≥–ª–∞—Å–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:');
    console.log('  ‚úÖ 4.1: –í–æ–∑–≤—Ä–∞—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–¥–∞—á');
    console.log('  ‚úÖ 4.2: –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ OCR –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á');
    console.log('  ‚úÖ 4.3: –í–æ–∑–≤—Ä–∞—Ç –æ–ø–∏—Å–∞–Ω–∏—è –æ—à–∏–±–∫–∏ –∏ –∫–æ–¥–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏');
    
    console.log('\nüîß –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:');
    console.log('  ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ jobId —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º');
    console.log('  ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ documentId –∫–∞–∫ fallback');
    console.log('  ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∑–∞–¥–∞—á–∞–º');
    console.log('  ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞ –º–µ–∂–¥—É –æ—á–µ—Ä–µ–¥—å—é –∏ –ë–î');
    console.log('  ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å HTTP –∫–æ–¥–∞–º–∏');
    console.log('  ‚úÖ –ú–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ç—É—Å–æ–≤ –æ—á–µ—Ä–µ–¥–∏ –≤ API —Å—Ç–∞—Ç—É—Å—ã');
    console.log('  ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤');
    console.log('  ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ—á–µ—Ä–µ–¥–∏ (503)');
    
    console.log('\nüìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞ API:');
    console.log('  ‚Ä¢ jobId/documentId - –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä');
    console.log('  ‚Ä¢ status - queued/processing/completed/failed');
    console.log('  ‚Ä¢ progress - –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (0-100)');
    console.log('  ‚Ä¢ priority - –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á–∏');
    console.log('  ‚Ä¢ document - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–∫—É–º–µ–Ω—Ç–µ');
    console.log('  ‚Ä¢ ocrResults - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã OCR (–µ—Å–ª–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ)');
    console.log('  ‚Ä¢ error - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)');
    console.log('  ‚Ä¢ queueInfo - —Å—Ç–∞—Ç—É—Å –≤ –æ—á–µ—Ä–µ–¥–∏');
    console.log('  ‚Ä¢ metadata - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏');
    
    console.log('\nüéØ –ó–∞–¥–∞—á–∞ 6.2 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
    console.log('GET /api/ocr –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–¥–∞—á –≤ BullMQ');
    
  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞ –≤ —Ç–µ—Å—Ç–∞—Ö:', error.message);
    process.exit(1);
  }
}

// –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç
testOcrStatusReal();