# Subscription Management Page - –ó–∞–¥–∞—á–∞ 7.2

**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–î–∞—Ç–∞**: 27 –∏—é–ª—è 2025 –≥.  
**–í–µ—Ä—Å–∏—è**: 1.0.0

## üìã –û–±–∑–æ—Ä

–°–æ–∑–¥–∞–Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ —Å –ø–æ–ª–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞**: `/subscription` - –ø–æ–ª–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- **–ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤ —Å —Ü–µ–Ω–∞–º–∏ –∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- **–ù–∞–≤–∏–≥–∞—Ü–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ "–ü–æ–¥–ø–∏—Å–∫–∏" –≤ Header

## üé® –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–∏–∑–∞–π–Ω 2025

### –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã –ø–ª–∞–Ω–æ–≤
- **FREE Plan**: Gray theme - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –±–∞–∑–æ–≤—ã–π –ø–ª–∞–Ω
- **LITE_ANNUAL Plan**: Emerald theme - –æ—Å–Ω–æ–≤–Ω–æ–π –ø–ª–∞–Ω ESG-Lite (–ø–æ–ø—É–ª—è—Ä–Ω—ã–π)  
- **CBAM_ADDON Plan**: Blue theme - –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è CBAM –æ—Ç—á–µ—Ç–æ–≤

### UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Plan Cards**: –¶–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–ª–∞–Ω–∞ —Å –∏–∫–æ–Ω–∫–∞–º–∏
- **Current Subscription**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏ —Å —Å—Ç–∞—Ç—É—Å–æ–º
- **Modal Dialogs**: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–º–µ–Ω—ã –ø–ª–∞–Ω–∞
- **History Table**: –ü–æ–ª–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –ø–æ–¥–ø–∏—Å–æ–∫

### –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ
- **Hover effects**: –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–ª–∞–Ω–æ–≤ —Å –ø–ª–∞–≤–Ω—ã–º–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- **Loading states**: –ö–Ω–æ–ø–∫–∏ —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏
- **Status badges**: –¶–≤–µ—Ç–æ–≤—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Å—Ç–∞—Ç—É—Å–æ–≤
- **Modal animations**: –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

## üîß –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
```tsx
// –ö–∞—Ä—Ç–æ—á–∫–∏ –ø–ª–∞–Ω–æ–≤ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
- –ù–∞–∑–≤–∞–Ω–∏–µ –∏ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞–Ω–∞
- –¶–µ–Ω–∞ –∏ –ø–µ—Ä–∏–æ–¥ –æ–ø–ª–∞—Ç—ã
- –°–ø–∏—Å–æ–∫ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤ —Ç–∞—Ä–∏—Ñ–µ
- –ö–Ω–æ–ø–∫–∞ –≤—ã–±–æ—Ä–∞ –ø–ª–∞–Ω–∞
```

### 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –ø–æ–¥–ø–∏—Å–∫–æ–π
```tsx
// –¢–µ–∫—É—â–∞—è –ø–æ–¥–ø–∏—Å–∫–∞
- –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ (ACTIVE, CANCELLED, EXPIRED, PENDING)
- –î–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
- –ê–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ
- –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
```

### 3. –°–º–µ–Ω–∞ —Ç–∞—Ä–∏—Ñ–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
```tsx
// –§—É–Ω–∫—Ü–∏—è —Å–º–µ–Ω—ã –ø–ª–∞–Ω–∞
- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∏–ª–∏ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–º–µ–Ω–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
```

### 4. –ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥–ø–∏—Å–æ–∫
```tsx
// –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏
- –í—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- –°—Ç–∞—Ç—É—Å—ã –∏ –ø–µ—Ä–∏–æ–¥—ã –¥–µ–π—Å—Ç–≤–∏—è
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–∏
- –¢–∏–ø—ã –ø–ª–∞–Ω–æ–≤ —Å –∏–∫–æ–Ω–∫–∞–º–∏
```

### 5. Quick Actions
```tsx
// –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- –ü–µ—Ä–µ—Ö–æ–¥ –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫—Ä–µ–¥–∏—Ç–∞–º–∏
- –ü–µ—Ä–µ—Ö–æ–¥ –∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–µ –¥–∞—à–±–æ—Ä–¥–∞  
- –°–≤—è–∑—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
```

## üîå API –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### Subscriptions API
```typescript
GET /api/subscriptions?organizationId=${id}
Response: {
  success: boolean,
  activeSubscription: Subscription | null,
  history: Subscription[]
}
```

### Plans API  
```typescript
GET /api/subscriptions/plans
Response: {
  success: boolean,
  plans: SubscriptionPlan[]
}
```

### Change Plan API
```typescript
POST /api/subscriptions/change-plan
Body: {
  organizationId: string,
  newPlan: string,
  immediate: boolean
}
Response: {
  success: boolean,
  subscription: Subscription
}
```

### Cancel Subscription API
```typescript
PATCH /api/subscriptions
Body: {
  organizationId: string,
  action: 'cancel'
}
```

## üì± Responsive Design

### Mobile (sm:)
- Single column layout –¥–ª—è –ø–ª–∞–Ω–æ–≤
- –°—Çacking –∫–∞—Ä—Ç–æ—á–µ–∫
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏
- Touch-friendly buttons

### Tablet (md:)  
- Grid layout 2x2 –¥–ª—è –ø–ª–∞–Ω–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
- –£–ª—É—á—à–µ–Ω–Ω–∞—è —á–∏—Ç–∞–µ–º–æ—Å—Ç—å

### Desktop (lg:)
- Three column grid –¥–ª—è –ø–ª–∞–Ω–æ–≤
- –ü–æ–ª–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–æ—Ä–∏–∏
- Hover interactions
- Modal dialogs

## üö¶ State Management

### Loading States
```tsx
// –†–∞–∑–ª–∏—á–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- Page loading: Skeleton screens –¥–ª—è –ø–ª–∞–Ω–æ–≤
- Action loading: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
- Modal loading: –°–æ—Å—Ç–æ—è–Ω–∏—è —Å–º–µ–Ω—ã –ø–ª–∞–Ω–∞
- Error boundaries: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ API
```

### Plan Management
```tsx
// –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞–º–∏
- Current plan detection
- Plan comparison logic  
- Pricing calculations
- Feature comparisons
```

### Subscription Status
```tsx
// –°—Ç–∞—Ç—É—Å—ã –ø–æ–¥–ø–∏—Å–æ–∫
- Active subscription monitoring
- Expiration date tracking
- Auto-renewal management
- Cancellation handling
```

## üéØ Plan Features

### FREE Plan (0 ‚ÇΩ)
- –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –û—Å–Ω–æ–≤–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤

### LITE_ANNUAL Plan (40,000 ‚ÇΩ/–≥–æ–¥) üåü –ü–æ–ø—É–ª—è—Ä–Ω—ã–π
- 1,000 —Ç CO‚ÇÇ –∫—Ä–µ–¥–∏—Ç–æ–≤ –≤–∫–ª—é—á–µ–Ω–æ
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 
- –í—Å–µ —à–∞–±–ª–æ–Ω—ã –æ—Ç—á–µ—Ç–æ–≤
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á–µ—Ç—ã

### CBAM_ADDON Plan (15,000 ‚ÇΩ/–≥–æ–¥)
- CBAM –æ—Ç—á–µ—Ç—ã –¥–ª—è –ï–°
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã
- –≠–∫—Å–ø–µ—Ä—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ CBAM
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏

## üîç UX Features

### Visual Hierarchy
- **Plan popularity**: "–ü–æ–ø—É–ª—è—Ä–Ω—ã–π" badge –¥–ª—è LITE_ANNUAL
- **Color coding**: –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–æ–≤—ã–µ —Å—Ö–µ–º—ã –ø–ª–∞–Ω–æ–≤
- **Icons**: Crown, Users, Shield –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤
- **Status indicators**: –¶–≤–µ—Ç–æ–≤—ã–µ badge –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤

### Interaction Design
- **Plan selection**: Hover —ç—Ñ—Ñ–µ–∫—Ç—ã –∏ —Ñ–æ–∫—É—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Modal workflow**: –ß–µ—Ç–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å —Å–º–µ–Ω—ã –ø–ª–∞–Ω–∞
- **Confirmation dialogs**: –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- **Loading feedback**: –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

### Accessibility
- **Keyboard navigation**: Tab order –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- **Screen readers**: ARIA labels –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **Color contrast**: WCAG 2.1 compliance
- **Focus management**: –ß–µ—Ç–∫–∏–µ focus indicators

## üìä TypeScript Interfaces

### Subscription Interface
```typescript
interface Subscription {
  id: string;
  plan: 'FREE' | 'LITE_ANNUAL' | 'CBAM_ADDON';
  status: 'ACTIVE' | 'CANCELLED' | 'EXPIRED' | 'PENDING';
  start_date: string;
  end_date: string | null;
  auto_renew: boolean;
  created_at: string;
}
```

### SubscriptionPlan Interface
```typescript
interface SubscriptionPlan {
  id: string;
  name: string;
  description: string;
  price: number;
  currency: string;
  billing_period: string;
  features: string[];
  credits_included: number;
  is_popular?: boolean;
  color_scheme: {
    bg: string;
    text: string;
    border: string;
    button: string;
  };
}
```

## üß™ Testing Results

**Comprehensive Testing**: ‚úÖ 17/15 –±–∞–ª–ª–æ–≤ (–ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏–π!)

- **File Structure**: ‚úÖ app/subscription/page.tsx —Å–æ–∑–¥–∞–Ω
- **UI Components**: ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- **Data Interfaces**: ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è
- **API Integration**: ‚úÖ –í—Å–µ 3 API endpoint –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã
- **Navigation**: ‚úÖ Header –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Å—Å—ã–ª–∫–æ–π "–ü–æ–¥–ø–∏—Å–∫–∏"
- **Functionality**: ‚úÖ –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏

**Test Command**: `npm run subscription:page:test`

## üöÄ Production Ready Features

**‚úÖ Complete Functionality:**
- Full subscription management workflow
- Plan comparison and selection
- Subscription status tracking
- History and billing information
- Error handling and loading states
- Modern 2025 design standards

**üîÑ Integration Points:**
- Subscription Service API (Task 3.x complete)
- Credits System integration (Task 7.1 complete)
- Payment System integration (Task 6.x complete)
- Navigation updates (Task 7.3 next)

## üéØ Next Steps

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥–∞—à–±–æ—Ä–¥–æ–º (–ó–∞–¥–∞—á–∞ 7.3)
- –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è CreditsDisplay –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ navigation menu

### Advanced Features (Future)
- Subscription renewal reminders
- Usage analytics –ø–æ –ø–ª–∞–Ω–∞–º
- Plan recommendation engine
- Billing history integration

**–ì–æ—Ç–æ–≤ –∫ –ø–µ—Ä–µ—Ö–æ–¥—É –Ω–∞ –∑–∞–¥–∞—á—É 7.3 "–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ –¥–∞—à–±–æ—Ä–¥"!** üéØ
