# ๐ CHECKLIST\_ะะะะะะขะ (ะพะฑะฝะพะฒะปัะฝ 26โ07โ2025)

*ะะดะธะฝัะน, ะฟะพะฝััะฝัะน ะปัะฑะพะผั ะฝะพะฒะธัะบั ะฟะปะฐะฝ: ััะพ ะฃะะ ะณะพัะพะฒะพ, ััะพ ะตัั ะฝัะถะฝะพ, ะทะฐัะตะผ ััะพ ะฝัะถะฝะพ ะธ ะบะฐะบะธะผะธ ัะตัะฒะธัะฐะผะธ (ัะพะปัะบะพ RUโfriendly, ะฑัะดะถะตั 2025).*\
*ะคะฐะนะป ัะธัะฐะตั ะะโะฟะพะผะพัะฝะธะบ, ะฟะพััะพะผั ะธะทะฑะตะณะฐะตะผ ะดะฒััะผััะปะตะฝะฝะพััะตะน.*

---

## 0. ะะดะต ะผั ัะตะนัะฐั โ๏ธ

| ะะพะผะฟะพะฝะตะฝั                         | ะกัะฐััั                          | ะะพััะฝะตะฝะธะต (ะทะฐัะตะผ)            |
| --------------------------------- | ------------------------------- | ---------------------------- |
| **ะคัะพะฝั** (Next 15 + Tailwind)    | โ ะะพัะพะฒ                         | UI/SSR + ะฐะดะฐะฟัะธะฒ.            |
| **OCR** (Paddle/Tesseract)        | โ ะะฐะฑะพัะฐะตั ะปะพะบะฐะปัะฝะพ             | ะะฐัะฟะพะทะฝะฐัะผ PDF/ัะบะฐะฝั.        |
| **ะจะฐะฑะปะพะฝ 296โะคะ**                 | โ ะะฐะปะธะดะตะฝ (ะะ 707)              | ะะพะถะฝะพ ัะดะฐะฒะฐัั ะพัััั.         |
| **ะจะฐะฑะปะพะฝ CBAM Qโ2025**            | โ ะะพะปั Annex I; XMLโdiff OK     | ะะพัะพะฒ ะบ Registry.            |
| **ะะ** (PostgreSQL16 โ SberCloud) | โ ะะพะดะฝััะฐ, Prisma ะฟะพะดะบะปัััะฝ     | ะฅัะฐะฝะธะผ users, docs, credits. |
| **S3** (Yandex Object Storage)    | โ ะะฐะบะตั `esg-lite-reports-2025` | ะคะฐะนะปั + CDN.                 |
| **Auth** (Clerk selfโhost)        | โ Email/pass + TG OIDC          | ะัะพััะฐั ัะตะณะธัััะฐัะธั.         |
| **CI (lint + build)**             | โ GitHub Actions                | ะะฐัะฐะฝัะธั ัะฑะพัะบะธ.             |

> **ะัะพะณะพ:** MVP ัะดัะพ ัะพะฑัะฐะฝะพ, ะผะพะถะฝะพ ะปะพะบะฐะปัะฝะพ ะทะฐะณััะทะธัั ัััั โ ะฟะพะปััะธัั ะฒะฐะปะธะดะฝัะน PDF ะพัััั.

---

## 1. ะงัะพ ะตัั ะฝัะถะฝะพ, ััะพะฑั ะฝะต ัะฟะฐััั ะฒ ะธัะฝะต ๐

| ะัะธะพั. | ะะฐะดะฐัะฐ                                     | ะะพัะตะผั ะฒะฐะถะฝะพ / ะงัะพ ะดะฐัั                               | ะัะดะถะตั (โฝ/ะผะตั)     |
| ------ | ------------------------------------------ | ----------------------------------------------------- | ------------------ |
| ๐ด     | **BullMQ + Queue Storage**                  | ะัะตัะตะดั OCR/PDF, ัะณะปะฐะดะธัั ะฟะธะบะพะฒัะต ะทะฐะฟัะพัั 15โ30 ะธัะฝั. | 0โ280 โฝ/ะผะตั        |
| ๐ด     | **Serviceโcapping 10 OCR/90 ัะตะบ**          | APIโะปะธะผะธั โ ะทะฐัะธัะฐ CPU.                               | โ                  |
| ๐ด     | **ะะธะณัะฐัะธั Node 18 โ 20 + Alpine Docker**  | Node 18 EOL ะฐะฟั. 2025.                                | โ                  |
| ๐     | **CI phase 2**: unitโัะตััั + `xmllint` XSD | ะะฐัะฐะฝัะธั, ััะพ CBAM XML ะฒะฐะปะธะดะตะฝ.                       | โ                  |
| ๐     | **Credits ledger ัะฐะฑะปะธัะฐ**                 | ะะธะปะปะธะฝะณ ะฒะผะตััะพ ะฟะพะผะตัััะฝะพะน ะฟะพะดะฟะธัะบะธ.                   | โ                  |
| ๐     | **Surgeโpricing flag** (+100 % 15โ30 ะธัะฝั) | ะะพัะธะฒะธััะตั ะณััะทะธัั ะทะฐัะฐะฝะตะต.                           | โ                  |
| ๐ข     | **Carbon Score (month)**                   | ะััััะบะฐ ะบััะณะปัะน ะณะพะด, KPI.                             | 0 (ัะฐัััั)         |
| ๐ข     | **Supplier portal (Tierโ2)**               | ะะปะฐััั ะผะตะปะบะธะต ะทะฐะฒะพะดั, ัะดะตัะถะฐะฝะธะต.                      | VPS +0             |

๐ **ะัะปะพะถะตะฝะพ** (ะฟะพัะปะต ะฟัะพะด vs MVP): YooKassa / TGโะฑะพั / Marketplace.

---

## 2. 90โDay Dev Roadmap (ะฑะตะท YooKassa)

| ะะตะดะตะปั | ะะปะพะบ             | ะะพะฝะบัะตัะฝัะต ะทะฐะดะฐัะธ                                                      | ะะพัะพะฒะพ, ะบะพะณะดะฐโฆ            |
| ------ | ---------------- | ---------------------------------------------------------------------- | ------------------------- |
| 1      | Node20 + Docker  | ะะฑะฝะพะฒะธัั `FROM node:20-alpine`; GHโAction `setup-node@v3`              | CI ะทะตะปัะฝัะน.               |
| 2      | Queue Storage    | โ ะัะฑัะฐัั: free-tier VM + Redis ะธะปะธ ะพัะตัะตะดั ะฒ Postgres                 | `GET /queue/health = ok`. |
| 3      | BullMQ Queue     | `/api/ocr` โ `jobs.add('ocr', {fileKey})`; worker in `/workers/ocr.ts` | `status=queued/finished`. |
| 4      | Capping MW       | Edgeโmiddleware: limit 10 jobs/90 ัะตะบ/org, ะธะฝะฐัะต 429                   | ะปะพะณะธะบะฐ ัะฐะฑะพัะฐะตั.          |
| 5      | Credits ledger   | Prisma `credits`, debit ะฟัะธ ะพััััะต; CLI `addโcredits`                  | ะฑะฐะปะฐะฝั ะผะตะฝัะตััั.          |
| 6      | Surge flag       | `isSurge = dateโ[15..30 ะธัะฝั]`; ัะตะฝะฐ ร2, ะฑะฐะฝะฝะตั UI                     | price calc ok.            |
| 7      | Unit tests       | `emission-calculator.spec.ts`, `pdf-generator.spec.ts`                 | 90 % pass.                |
| 8      | XSD CI           | Job `xmllint --schema CBAM.xsd`                                        | GH passes.                |
| 9      | Carbon Score API | cron monthly, store KPI; `/api/kpi/monthly`                            | ะณัะฐัะธะบ ะฒ dashboard.       |

---

## 3. ะะพะฝะตัะธะทะฐัะธั (ะณะธะฑัะธะด, ะดะตัะตะฒะปะต ะฟะพะผะตัััะฝะพะน)

- **Annual Lite** 30โ50 ะบ โฝ / ะณะพะด โ ะฒะบะปััะฐะตั 1 000 ั COโ.
- **Credits 5 โฝ/ั** ัะฒะตัั ะปะธะผะธัะฐ.
- **Surge ร2** ะฒ "ะบัะฐัะฝัั" ยฝ ะธัะฝั.
- **CBAM Addโon** 3 โฌ/ั ะฒ ะพััััะฐั ะะก (ะบะพะณะดะฐ ะฟะพะดะบะปััะธะผ).
- **Carbon Score** 2 ะบ โฝ/ะผะตั, KPIโะดะฐัะฑะพัะด.\
  *(ะฎKassa ะฟะพะดะบะปััะฐะตะผ ัะพะปัะบะพ ะบ ะผะพะผะตะฝัั ะฒััะพะดะฐ ะฒ ะฟัะพะด โ Sprint 10.)*

---

## 4. ะััะธัะตะบัััะฐ (Bestโcost RUโstack)

```
[Next15]โโRESTโโโถโBullMQ APIโโโโถ Queue Storage (Redis VM ะธะปะธ Postgres)
  โ                               โ
  โ            Job fetch (S3)     โผ
  โ                          YC Serverless Container (ocrโworker)
  โ                               โ
  โ           PDF/A Playwright    โผ
  โโโโถ Yandex Object Storage โโโ Report files

DB โ SberCloud PostgreSQL 24/7 (free tier)  
Monitoring โ UptimeRobot + YC Monitoring.  
CI/CD โ GitHub Actions โ docker push โ YC CR.
```

**ะะพัะตะผั ัะฐะบ?**\
*ะะ ะฒ SberCloud ัะถะต ะฟะพะดะฝััะฐ โ ะผะตะฝััั ะฝะต ะฝัะถะฝะพ. Queue Storage + S3 ะพััะฐัััั ะฒ ะฏะฝะดะตะบัะต (ะดะตัะตะฒะปะต).*\
*YC Serverless Containers ะฑะตัะฟะปะฐัะฝั ะฟัะธ 0 ัะตะฟะปะธะบ, ัะบะตะนะปัััั ะผะณะฝะพะฒะตะฝะฝะพ ะดะพ 30, ััะพ ะฟะพะบััะฒะฐะตั ะธัะฝััะบะธะน ะฟะธะบ.*

---

## 5. Glossary (ะฝะพะฒะธัะบั ะฟะพะฝััะฝะพ)

- **BullMQ** โ ะฑะธะฑะปะธะพัะตะบะฐ ะพัะตัะตะดะตะน; ะบะปะฐะดัะผ ะทะฐะดะฐัั, worker ะทะฐะฑะธัะฐะตั.
- **Queue Storage** โ ััะฐะฝะธะปะธัะต ะพัะตัะตะดะตะน (Redis VM ะธะปะธ ัะฐะฑะปะธัั ะฒ Postgres).
- **Playwright cluster** โ ะฝะตัะบะพะปัะบะพ Chromiumโะฟัะพัะตััะพะฒ ะณะตะฝะตััั PDF.
- **PDF/A** โ ัะฟะตัะธะฐะปัะฝัะน ยซะฐััะธะฒะฝัะนยป PDF, ะะพัะฟัะธัะพะดะฝะฐะดะทะพั ัะตะบะพะผะตะฝะดัะตั.
- **Surgeโpricing** โ ะฒัะตะผะตะฝะฝะพะต ะฟะพะฒััะตะฝะธะต ัะตะฝั ะฒะพ ะฒัะตะผั ะฟะธะบะพะฒะพะน ะฝะฐะณััะทะบะธ.

---

## 6. ะะพะฝััะพะปัะฝัะน ัะตะบ ะฟะตัะตะด ะฟัะพะด

โ Node20 ะฒ Docker image.\
โ Queue Storage ะพัะฒะตัะฐะตั.\
โ Workerโscale 0โ30.\
โ PDF/A ะฟัะพัะพะดะธั Preflight.\
โ XML ะฟัะพัะพะดะธั XSD 1.4.1.1.\
โ Serviceโcapping ะดะฐัั 429 >10 jobs/90 ัะตะบ.\
โ Credits ะฑะฐะปะฐะฝั ะฝะต ััะพะดะธั ยซโยป.\
โ UptimeRobot ะฟะธะฝะณ <300 ms.

---

> **ะัะต ะฟัะฝะบัั ะฒััะต ยซ๐ด/๐ยป ะพะฑัะทะฐัะตะปัะฝั ะดะพ ฮฒโัะตะปะธะทะฐ. YooKassa, Marketplace ะธ 1ะกโะฟะปะฐะณะธะฝ โ ะฟะพัะปะต ััะฐะฑะธะปัะฝะพะน ัะฐะฑะพัั ัะดัะฐ.**