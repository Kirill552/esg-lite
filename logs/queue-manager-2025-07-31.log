{"timestamp":"2025-07-31T14:41:24.840Z","level":"info","component":"queue-manager","message":"Calculated operation cost","data":{"documentId":"test-doc-123","requiredCredits":1,"baseCost":1,"surgePricingMultiplier":1}}
{"timestamp":"2025-07-31T14:41:24.841Z","level":"info","component":"queue-manager","message":"Adding OCR job to queue","organizationId":"org-123","data":{"documentId":"test-doc-123","priority":0,"requiredCredits":1,"blockingTransactionId":"trans-123","jobOptions":{"priority":0,"retryLimit":3,"expireInHours":1}}}
{"timestamp":"2025-07-31T14:41:24.842Z","level":"info","component":"queue-manager","message":"Job started: OCR","jobId":"job-123","data":{"documentId":"test-doc-123","priority":0,"organizationId":"org-123","blockedCredits":1}}
{"timestamp":"2025-07-31T14:41:24.848Z","level":"info","component":"queue-manager","message":"Calculated operation cost","data":{"documentId":"test-doc-123","requiredCredits":2,"baseCost":1,"surgePricingMultiplier":2}}
{"timestamp":"2025-07-31T14:41:24.849Z","level":"warn","component":"queue-manager","message":"Insufficient credits for organization","organizationId":"org-123","data":{"organizationId":"org-123","documentId":"test-doc-123","requiredCredits":2,"availableCredits":1}}
{"timestamp":"2025-07-31T14:41:24.874Z","level":"info","component":"queue-manager","message":"Calculated operation cost","data":{"documentId":"test-doc-123","requiredCredits":1,"baseCost":1,"surgePricingMultiplier":1}}
{"timestamp":"2025-07-31T14:41:24.877Z","level":"info","component":"queue-manager","message":"Calculated operation cost","data":{"documentId":"test-doc-123","requiredCredits":1,"baseCost":1,"surgePricingMultiplier":1}}
{"timestamp":"2025-07-31T14:41:24.877Z","level":"info","component":"queue-manager","message":"Adding OCR job to queue","organizationId":"org-123","data":{"documentId":"test-doc-123","priority":0,"requiredCredits":1,"blockingTransactionId":"trans-123","jobOptions":{"priority":0,"retryLimit":3,"expireInHours":1}}}
{"timestamp":"2025-07-31T14:41:24.878Z","level":"info","component":"queue-manager","message":"Credits unblock requested","data":{"organizationId":"org-123","transactionId":"trans-123","reason":"Job queue addition failed"}}
{"timestamp":"2025-07-31T14:41:24.878Z","level":"error","component":"queue-manager","message":"Failed to add OCR job to queue","organizationId":"org-123","data":{"documentId":"test-doc-123","options":{"priority":0,"retryLimit":3,"expireInHours":1},"unblockedTransactionId":"trans-123"},"error":{"name":"Error","message":"Queue is full","stack":"Error: Queue is full\n    at Object.<anonymous> (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\__tests__\\lib\\queue-credits.test.ts:191:39)\n    at Promise.finally.completed (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1559:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1499:10)\n    at _callCircusTest (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1009:40)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at _runTest (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:949:3)\n    at _runTestsForDescribeBlock (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:839:13)\n    at _runTestsForDescribeBlock (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at _runTestsForDescribeBlock (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:829:11)\n    at run (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:757:3)\n    at runAndTransformResultsToJestFormat (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\jestAdapterInit.js:1920:21)\n    at jestAdapter (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-circus\\build\\runner.js:101:19)\n    at runTestInternal (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-runner\\build\\testWorker.js:275:16)\n    at runTest (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-runner\\build\\testWorker.js:343:7)\n    at Object.worker (C:\\Users\\whirp\\Desktop\\bots\\EGS-Lite\\node_modules\\jest-runner\\build\\testWorker.js:497:12)"}}
{"timestamp":"2025-07-31T14:41:24.883Z","level":"info","component":"queue-manager","message":"Calculated operation cost","data":{"documentId":"test-doc-123","requiredCredits":2,"baseCost":1,"surgePricingMultiplier":2}}
{"timestamp":"2025-07-31T14:41:24.884Z","level":"info","component":"queue-manager","message":"Adding OCR job to queue","organizationId":"org-123","data":{"documentId":"test-doc-123","priority":2,"requiredCredits":2,"blockingTransactionId":"trans-123","jobOptions":{"priority":2,"retryLimit":3,"expireInHours":1}}}
{"timestamp":"2025-07-31T14:41:24.884Z","level":"info","component":"queue-manager","message":"Job started: OCR","jobId":"job-urgent-123","data":{"documentId":"test-doc-123","priority":2,"organizationId":"org-123","blockedCredits":2}}
{"timestamp":"2025-07-31T14:41:24.888Z","level":"info","component":"queue-manager","message":"Calculated operation cost","data":{"documentId":"test-doc-123","requiredCredits":1,"baseCost":1,"surgePricingMultiplier":1}}
{"timestamp":"2025-07-31T14:41:24.888Z","level":"info","component":"queue-manager","message":"Adding OCR job to queue","organizationId":"user-456","data":{"documentId":"test-doc-123","priority":0,"requiredCredits":1,"blockingTransactionId":"trans-123","jobOptions":{"priority":0,"retryLimit":3,"expireInHours":1}}}
{"timestamp":"2025-07-31T14:41:24.889Z","level":"info","component":"queue-manager","message":"Job started: OCR","jobId":"job-123","data":{"documentId":"test-doc-123","priority":0,"organizationId":"user-456","blockedCredits":1}}
